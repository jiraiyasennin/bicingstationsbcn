{% extends "dashboard/base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
<h1 class="mt-4 text-center">Bicing Search</h1>
<ol class="breadcrumb mb-4">
    <li class="breadcrumb-item active">Apps Home</li>
    <li class="breadcrumb-item active">Bicing</li>
</ol>
<div class="row  justify-content-center">
   <div class="row">
      <form action="" method="POST" id="formCoord">
         {% csrf_token %}
         {{ form|crispy }}
      <input class="btn btn-info mb-2 form-control btn-sm" type="submit" name="submit" value="Buscar bicis">
      </form>
   </div>
  <script type="text/javascript">
      var lat;
      var long;
      window.onload = function getLocation() {
         if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
         } else {
            alert("Geolocation is not supported by this browser.");
         }
      }
      function showPosition(position) {
         document.getElementById("id_lat").value = position.coords.latitude;
         document.getElementById("id_long").value = position.coords.longitude;
         
      }
   </script>  
</div>
<div class="row justify-content-center">
   {% if messages %}
       {% for message in messages %}
         {% if message.tags %} 
            <div class="alert alert-danger">{{ message }}</div>
         {% endif %}
       {% endfor %}
   {% endif %}
</div>
{% endblock content %}